<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<script> 
    let map

    function initMap(){
        var locations = {{ locations|safe }};
        var firstLocation = locations[0];
        var infoWindow = [];
    
        map = new google.maps.Map(document.getElementById("map"), {
            center: { lat: firstLocation.lat, lng: firstLocation.lng }, 
            zoom: 17,
        });
    
        locations.forEach(function (location) {
            var marker = new google.maps.Marker({
                position: { lat: location.lat, lng: location.lng }, 
                map: map, 
                title: location.name
            });
    
            var infowindow = new google.maps.InfoWindow();
    
            infoWindow.push(infowindow);
    
            marker.addListener('click', function() {
                // Criar um elemento div para conter a imagem
                var contentString = "<p>" + location.name + "</p>" +
                                "<div style='width: 100px; height: 100px;' class='justify-content-center'><img src='https://blog.institutoalicerceedu.org.br/wp-content/uploads/2021/10/thumb-12-570x515.png' style='width: 100%; height: 100%; object-fit: cover;'>" +
                                "</div>";
                infowindow.setContent(contentString);
                infowindow.open(map, marker);
            });
        });
    }
    
    window.initMap = initMap;

</script>