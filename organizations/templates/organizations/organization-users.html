{% extends "main/base.html" %}
{% load static %}

{% block title %}{{org.organization.name}} - Doações{% endblock title %}

{% block content %}
        {% if messages %}
            {% for message in messages %}   
            <div class="container py-4">
                <div class="row">
                    <div class="alert alert-{% if message.tags == 'error' %}danger{% elif message.tags == 'success' %}success{% endif %} alert-dismissible fade show m-auto mb-4" role="alert">
                        {{ message }}
                        <br>
                        <button type="button" class="btn-close d-flex justify-content-end" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}


        <section class="news-detail-header-section text-center">
            <div class="section-overlay"></div>

            <div class="container">
                <div class="row">

                    <div class="col-lg-12 col-12">
                        <h1 class="text-white">Usuários - {{org.organization.name}}</h1>
                    </div>

                </div>
            </div>
        </section>


        <section class="news-section">

            <div class="container section-padding">
                <h2 class="mb-4 text-dark">Todos os usuários da organização</h2>
                <div class="list-group">

                    <!-- Item de exemplo -->

                    {% for org_user in users %}
                        <div class="list-group-item py-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h5 class="mb-1">{{org_user.0.first_name}} {{org_user.0.last_name}}</h5>
                                <div class="row">
                                    <div class="col-12">
                                        <!-- Caso você seja admin, mostrar a opção de remover usuário -->
                                        {% if role == 0 %}
                                            {% if org_user.0 != user and org_user.1 == 1 %}
                                                <a class="btn btn-danger float-end mb-3">Remover usuário &nbsp;<i class="bi bi-trash-fill"></i></a>
                                            {% elif org_user.0 == user %}
                                                <a class="btn btn-danger float-end mb-3">Sair da organização &nbsp;<i class="bi bi-box-arrow-right"></i></a>
                                            {% endif %}
                                        {% elif role == 1 %}
                                            {% if org_user.0 == user %}
                                                <a class="btn btn-danger float-end mb-3">Sair da organização &nbsp;<i class="bi bi-box-arrow-right"></i></a>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    <div class="col-12">
                                        {% if role == 0 %}
                                            {% if org_user.1 == 1 %}
                                                <a class="btn btn-success float-end">Promover para administrador &nbsp;<i class="bi bi-person-check"></i></a>
                                            {% endif %}
                                        {% endif %}
                                        
                                    </div>
                                </div>
                            </div>
                            <p>{{org_user.0.email}}</p>
                        </div>
                    {% endfor %}

                </div>
            </div>

        </section>


{% endblock content %}